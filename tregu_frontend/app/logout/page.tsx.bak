"use client"
import { useEffect } from "react"
import { useRouter } from "next/navigation"

export default function Logout(){
  const r = useRouter()
  useEffect(()=>{
    try{
      // clear only Tregu keys to be safe
      Object.keys(localStorage).filter(k=>k.startsWith("tregu:")).forEach(k=>localStorage.removeItem(k))
    }catch{}
    document.cookie = "tregu_session=; Path=/; Max-Age=0; SameSite=Lax"
    fetch("/api/auth/logout",{ method:"POST", credentials:"include" })
      .finally(()=> r.replace("/join"))
  },[])
  return <main className="p-6">Signing you outâ€¦</main>
}